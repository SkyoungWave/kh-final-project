	<%@ page language="java" contentType="text/html; charset=UTF-8"
	    pageEncoding="UTF-8"%>
	<!DOCTYPE html>
	<html>
	<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	 <link rel="stylesheet" type="text/css" href="https://contents-image.twayair.com/homepage/css/style.css?ver=xLa2XMQS+lXZNnNZJT/w1o+tqU09m0cQds7pNdg4sJIh4Nk79MAhD2BFWRsfr5r2">
 <link rel="stylesheet" type="text/css" href="https://contents-image.twayair.com/homepage/css/waitMe.css">

 <style type="text/css">
     div.debug {
         display:none;
     }

    /* 소이언니가 보내준 style */
    .bs4-order-tracking{margin-bottom: 30px;overflow: hidden; color: #878788;padding-left: 0px;margin-top: 30px} 
	.bs4-order-tracking li{list-style-type: none;font-size: 13px;width: 15%;   float: left;position: relative;font-weight: 400;color: #878788;text-align: center}
	.bs4-order-tracking li:first-child:before{margin-left: 15px !important;padding-left: 11px !important;text-align : left !important}
	.bs4-order-tracking li:last-child:before{margin-right: 5px !important;padding-right: 11px !important;text-align : right !important}
	.bs4-order-tracking li>div{color: #fff;width: 29px; height: 29px; text-align: center; line-height: 29px;display: block;font-size: 12px;background: #878788;border-radius: 50%; margin: auto;}
	.bs4-order-tracking li>div>i{margin-top: 10px;}
	.bs4-order-tracking li:after{content: '';width: 150%;height: 2px;background: #878788;position: absolute;left: 0%;right: 0%;top: 15px;z-index: -1}
	.bs4-order-tracking li:first-child:after{left: 50%}
	.bs4-order-tracking li:last-child:after{left: 0%!important;width: 0% !important}
	.bs4-order-tracking li.active{font-weight: bold;color: #dc3545}
	.bs4-order-tracking li.active>div{background: #da5c3d}
	.bs4-order-tracking li.active:after{background: #da5c3d}
	.card-timeline{background-color: #fff;z-index: 0}
 </style>




 <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
 <script async="" src="//cdn.tbase.co.kr/tbase/l4cts.v5.2t.js"></script>
 <script src="https://connect.facebook.net/signals/config/371419434194566?v=2.9.90&amp;r=stable" async=""></script>
 <script async="" src="https://connect.facebook.net/en_US/fbevents.js"></script>
 <script async="" src="//cdn.tbase.co.kr/tbase/common/1069_common.js"></script>
 <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
 <script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-TC4XB6D"></script>
 <script type="text/javascript" async="" src="https://www.googletagmanager.com/gtag/js?id=G-DMDBYR48JD&amp;l=dataLayer&amp;cx=c"></script>
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/jquery-1.12.4.min.js"></script>
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/app/jquery-tmpl/jquery.tmpl.js"></script>
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/jquery-ui.js"></script>

 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/app/waitMe.js"></script>

 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/js.cookie.min.js"></script>
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/hangul.min.js"></script> <!--한글 자음/모음 분리/조합 자바스크립트 라이브러리-->
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/cmmUtils.js?ver=xLa2XMQS+lXZNnNZJT/w1o+tqU09m0cQds7pNdg4sJIh4Nk79MAhD2BFWRsfr5r2"></script>

 <!--소이언니가 준 script-->
 <script src='https://kit.fontawesome.com/77ad8525ff.js' crossorigin="anonymous"></script>

 <!-- Global Js -->
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/app/global.js?ver=xLa2XMQS+lXZNnNZJT/w1o+tqU09m0cQds7pNdg4sJIh4Nk79MAhD2BFWRsfr5r2"></script>
 

 <!-- fingerprint Js -->
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/app/fingerprint.js"></script>
 
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/app/java_hashcode.js"></script>
 

 <!--// twaygtm > GTM Js -->
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/app/gtm.js"></script>
 

 <!-- begin, from Publishing -->
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/ui.common.js?ver=xLa2XMQS+lXZNnNZJT/w1o+tqU09m0cQds7pNdg4sJIh4Nk79MAhD2BFWRsfr5r2"></script>
 
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/swiper.js"></script>
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/jquery.mCustomScrollbar.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js"></script>
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/slick.js"></script>
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/rangeslider.min.js"></script>
 <!-- end, from Publishing -->

 <!--// datetimepicker -->
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/lib/jquery.datetimepicker.full.min.js"></script>
 <link rel="stylesheet" href="https://contents-image.twayair.com/homepage/css/lib/jquery.datetimepicker.min.css">

 <!-- Validation Js -->
 <script type="text/javascript" src="https://contents-image.twayair.com/homepage/js/app/validation.js"></script>
 
 <!-- // Validation Js -->



<script type="text/javascript">
 $(document).ready(function() {
 });
</script>
	
	</head>
	<body>
		<div id="wrap">
    <!--// begin content -->

<!-- Contnent -->
<div id="container">
    <div class="content" id="content">
        <!-- 컨텐츠 영역 -->

        <!-- Title & Step -->
        <div class="tit_booking_wrap">
            <h2 class="pg_tit">항공권예매</h2>
            <div class="step_booking">
                <!--
                <ol>
                    <li class="step01 on">
                        <span class="blind">현재</span>
                        <span class="text_step">01 여정 검색</span>
                    </li>
                    <li class="step02">
                        <span class="text_step">02</span>
                    </li>
                    <li class="step03">
                        <span class="text_step">03</span>
                    </li>
                    <li class="step04">
                        <span class="text_step">04</span>
                    </li>
                    <li class="step05">
                        <span class="text_step">05</span>
                    </li>
                    <li class="step06">
                        <span class="text_step">06</span>
                    </li>
                </ol>
                -->
                <ul class="bs4-order-tracking"> 
                    <li class="step active">
                         <div><i class="fas fa-check"></i></div> 1.여정검색 
                    </li>
                    <li class="step "> 
                        <div><i class="fas fa-check"></i></div> 2.탑승자 정보 입력 
                    </li> 
                    <li class="step "> 
                        <div><i class="fas fa-check"></i></div> 3.부가서비스 
                    </li>
                    <li class="step "> 
                        <div><i class="fas fa-check"></i></div> 4.선택내역 확인 및 규정동의 
                    </li>
                    <li class="step "> 
                        <div><i class="fas fa-check"></i></div> 5.결제 
                    </li> 
                    <li class="step "> 
                        <div><i class="fas fa-check"></i></div> 6.예약완료 
                    </li>  			 
                    <br><br><br><br><br><br>
                </ul> 
            </div>
            
        </div>
        <!-- Title & Step -->

        <!-- 여정검색  -->
        



<!-- Input Booking -->
<div class="input_booking_wrap">
<!-- 예약 탭 -->
<div class="booking_option">
    <ul class="sel_section">
        <li class="on">
            <a href="#booking01" onclick="$('#display_tripType_RT').prop('checked',true);$('#display_tripType_RT').trigger('change');" title="선택됨">
                <input aria-hidden="true" id="display_tripType_RT" name="tripTypeButton" tabindex="-1" type="radio" value="RT">
                <label for="display_tripType_RT">왕복</label>
            </a>
        </li>
        <li>
            <a href="#booking02" onclick="$('#display_tripType_OW').prop('checked',true);$('#display_tripType_OW').trigger('change');">
                <input aria-hidden="true" id="display_tripType_OW" name="tripTypeButton" tabindex="-1" type="radio" value="OW">
                <label for="display_tripType_OW">편도</label>
            </a>
        </li>
        
    </ul>
    
</div>
<!--// 예약 탭 -->




<!-- 왕복 -->
<div class="tab_cont fixed schedule_box" id="booking01" tabindex="0" style="display: block;">
    <div class="booking_input">
        <ul class="booking_form">
            <li>
                <div class="sel_route">
                    <div class="input_wrap start">
                        <label>출발지</label>
                        <input class="booking start focus_start1" onblur="checkAirportPinStatus(this, 0);" onclick="gnbSelectAirport(this, 0,'search','searchItr');"  readonly="" title="출발지 입력" type="text" value="" placeholder="도시/공항">
                        <a class="btn_pin focus_start2" href="#none" onclick="gnbSelectAirport($(this).parent().find('input'), 0, 'region','searchItr');" title="출발지 선택 레이어 열림">출발지 선택</a>

                        <!-- 선택 레이어 -->
                        <div class="selected_area start" onclick="gnbSelectAirport($(this).parent().parent().find('input'), 0,'search','searchItr');">
                            <a href="#" >
                                <span class="eng">ICN</span>
                                <span class="area">서울/인천</span>
                            </a>
                        </div>
                        <!--// 선택 레이어 -->
                    </div>

                    <!-- 왕복 출발지 선택 div 시작-->

                    <div id="route_departure" class="commonComponentLayer" data-timestamp="1671066730313" tabindex="0" 
                        style="position: absolute; top: 90px; left: 48px; display: none;">

                        <div id="start2" class="layer_start2 second_start2 main_selec_start">
                            <div class="layer_cont">
                                
                    
                                <div class="sel_area_list fix scroll mCustomScrollbar _mCS_3 mCS_no_scrollbar"><div id="mCSB_3" class="mCustomScrollBox mCS-light mCSB_vertical mCSB_inside" tabindex="0" style="max-height: none;"><div id="mCSB_3_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position:relative; top:0; left:0;" dir="ltr">
                                    <ul>
                                        
                                        <!-- /*<li class="closestList"><a href="#none" class="sel_area" th:text="${contents.get('label.currLocation')}">가까운 공항</a></li> */-->
                    
                                        
                                        
                                            <li data-conticode="SKR" class="contiList contiList_SKR">
  
                                                <a class="sel_area" href="#none" title="지역 선택">일본</a>
                                            </li>
                                        
                                    </ul>
                    
                                </div>

                                <div id="mCSB_3_scrollbar_vertical" class="mCSB_scrollTools mCSB_3_scrollbar mCS-light mCSB_scrollTools_vertical" style="display: none;">
                                    <div class="mCSB_draggerContainer">
                                        <div id="mCSB_3_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; height: 0px; top: 0px;">
                                            <div class="mCSB_dragger_bar" style="line-height: 30px;"></div>
                                        </div>
                                        <div class="mCSB_draggerRail"></div>
                                    </div>
                                </div>

                            </div>
                        </div>
                                
                        <!--// 지역선택 -->
                    
                                
                        <!-- 취항지 -->
                        <div class="sel_route_list type2 scroll mCustomScrollbar _mCS_4 mCS_no_scrollbar"><div id="mCSB_4" class="mCustomScrollBox mCS-light mCSB_vertical mCSB_inside" tabindex="0" style="max-height: none;"><div id="mCSB_4_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position:relative; top:0; left:0;" dir="ltr">

                                <!-- continent 별로 for문 돌리기-->

                                <div class="airportList airportList_SKR scroll" style="display: block;">
                                    <ul>
                                        <li>
                                            <a class="sel_city" href="#none" onclick="selectDepartureAirport(this);" data-conti="SKR" data-city="서울" data-airport="인천" data-airport_code="ICN">
                                                <span class="kor">서울/인천</span>
                                                <span class="eng">ICN</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="airportList airportList_JAP scroll" style="display: none;">
                                    <ul>
                                        <li>
                                            <a class="sel_city" href="#none" onclick="selectDepartureAirport(this);" data-conti="JAP" data-city="오사카" data-airport="간사이" data-airport_code="KIX">
                                                <span class="kor">오사카/간사이</span>
                                                <span class="eng">KIX</span>
                                            </a>
                                        </li>
                                        
                                    </ul>
                                </div>
                            
            
                                <div class="airportList airportList_NEA scroll" style="display: none;">
                                    <ul>
                                        <li>
                                            <a class="sel_city" href="#none" onclick="selectDepartureAirport(this);" data-conti="NEA" data-city="홍콩" data-airport="홍콩" data-airport_code="HKG">
                                                <span class="kor">홍콩</span>
                                                <span class="eng">HKG</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            
                                <div class="airportList airportList_SEA scroll" style="display: none;">
                                    <ul>
                                        <li>
                                            <a class="sel_city" href="#none" onclick="selectDepartureAirport(this);" data-conti="SEA" data-city="싱가포르" data-airport="싱가포르" data-airport_code="SIN">
                                                <span class="kor">싱가포르</span>
                                                <span class="eng">SIN</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            
                        </div>

                            <div id="mCSB_4_scrollbar_vertical" class="mCSB_scrollTools mCSB_4_scrollbar mCS-light mCSB_scrollTools_vertical" style="display: none;">
                                <div class="mCSB_draggerContainer">
                                    <div id="mCSB_4_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 30px; height: 0px; top: 0px;">
                                        <div class="mCSB_dragger_bar" style="line-height: 30px;"></div>
                                    </div>
                                    <div class="mCSB_draggerRail"></div>
                                </div>
                            </div>

                            </div>
                        </div>
                                <!--/ 취향지 -->
                            </div>
                            
                        </div>
                        <!--// Input Hover 시 -->
                    
                        <div class="dialog booking" id="flightBooking" style="display: none;">
                            <div class="dialog_table">
                                <div class="dialog_cell">
                                    <div class="dialog_wrap full">
                                        <div class="dialog_header back">
                                            <h2>노선 선택</h2>
                                            <a class="btn_back" href="javascript:routeDepartureCloseSelf();"><span class="offscreen">이전 화면</span></a>
                                            <a class="dialog_close" href="javascript:routeDepartureCloseSelf();"><span class="offscreen">팝업창 닫기</span></a>
                                        </div>
                                        <div class="dialog_content lock">
                                            <div class="section t3">
                    
                    
                                                <div class="route_summary fixed clear s2">
                                                    <div class="route_wrap clearfix">
                                                        
                                                        <div class="route start on">
                                                            <!-- <h3><span>출발지</span></h3> -->
                                                            <strong class="airport departure on" id="routeDepartureAirportCode">출발지</strong> <!-- 선택 departure 클래스 추가/삭제 -->
                                                            <span class="area" id="departureAirportName">도시/공항</span>
                                                            <!-- <span class="current">
                                                                <span class="offscreen">현재 출발지가 선택되어 있습니다.</span>
                                                            </span> -->
                                                        </div>
                                                        <div class="route arrive">
                                                            <!-- <h3><span>도착지</span></h3> -->
                                                            <strong class="airport arrival">도착지</strong> <!-- 선택 arrival 클래스 추가/삭제-->
                                                            <span class="area">도시/공항</span>
                                                        </div>
                    
                                                        <div class="route_plain_info route_arrow"></div>
                                                    </div>
                    
                                                </div>
                                                <!-- //route_wrap -->
                    
                    
                                                
                    
                                                <div class="route_scroll">
                                                    <div class="route_info">
                                                        <div class="accordion route fixed">
                
                                                            <h3 class="title">대한민국</h3>
                                                            <div class="panel">
                                                                <ul class="route_list departure_airport_list">
                    
                                                                    <li>
                                                                        <a class="btn_route departure_airport" href="#none" onclick="selectDepartureAirport(this);" data-conti="SKR" data-city="서울" data-airport="인천" data-keyword="ICN서울/인천" data-airport_code="ICN">
                                                                            서울/인천
                                                                            ICN
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            
                                                            <h3 class="title">일본</h3>
                                                            <div class="panel">
                                                                <ul class="route_list departure_airport_list">
                    
                                                                    <!-- 출발지 continent와 도시/공항 선택하면 도착지에도 그거 잡고 들어간다. 
                                                                    <li>
                                                                        <a class="sel_city off" href="#none">
                                                                            <span class="kor">도시/공항</span>
                                                                            <span class="eng">공항코드</span>
                                                                        </a>
                                                                    </li> 
                                                                    -->

                                                                    <li>
                                                                        <a class="sel_city off" href="#none">
                                                                            <span class="kor">서울/인천</span>
                                                                            <span class="eng">ICN</span>
                                                                        </a>
                                                                    </li>

                                                                    <!-- JAP 공항 리스트 for문 돌리기 -->

                                                                    <li>
                                                                        <a class="btn_route departure_airport" href="#none" onclick="selectDepartureAirport(this);" data-conti="JAP" data-city="오사카" data-airport="간사이" data-keyword="KIX오사카/간사이" data-airport_code="KIX">
                                                                            오사카/간사이
                                                                            KIX
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            
                                                            
                                                            <h3 class="title">동북아시아</h3>
                                                            <div class="panel">
                                                                <ul class="route_list departure_airport_list">
                    
                                                                     <!-- 출발지 continent와 도시/공항 선택하면 도착지에도 그거 잡고 들어간다. 
                                                                    <li>
                                                                        <a class="sel_city off" href="#none">
                                                                            <span class="kor">도시/공항</span>
                                                                            <span class="eng">공항코드</span>
                                                                        </a>
                                                                    </li> 
                                                                    -->
                    
                                                                    <!-- NEA 공항 리스트 for문 돌리기 -->

                                                                    <li>
                                                                        <a class="btn_route departure_airport" href="#none" onclick="selectDepartureAirport(this);" data-conti="NEA" data-city="홍콩" data-airport="홍콩" data-keyword="HKG홍콩" data-airport_code="HKG">
                                                                            홍콩
                                                                            HKG
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>	
                                                            
                                                            <h3 class="title">동남아시아</h3>
                                                            <div class="panel">
                                                                <ul class="route_list departure_airport_list">
                    
                                                                     <!-- 출발지 continent와 도시/공항 선택하면 도착지에도 그거 잡고 들어간다. 
                                                                    <li>
                                                                        <a class="sel_city off" href="#none">
                                                                            <span class="kor">도시/공항</span>
                                                                            <span class="eng">공항코드</span>
                                                                        </a>
                                                                    </li> 
                                                                    -->
                    
                                                                    <!-- SEA 공항 리스트 for문 돌리기 -->

                                                                    <li>
                                                                        <a class="btn_route departure_airport" href="#none" onclick="selectDepartureAirport(this);" data-conti="SEA" data-city="싱가포르" data-airport="싱가포르" data-keyword="SIN싱가포르" data-airport_code="SIN">
                                                                            싱가포르
                                                                            SIN
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                                                        
                                                        </div>
                    
                                                    </div>
                                                </div>
                                                <div class="btn_set fixed div_mtb0">
                                                    <ul>
                                                        <li> <a class="btn s1 c1" href="#none" onclick="confirmDepartureAirport();">확인</a> </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    
                    <!-- script 시작-->
                    
                    
                        <script type="text/javascript">
                    
                           /*  var alert_msg_save_favorites = '\uC990\uACA8 \uCC3E\uB294 \uB178\uC120\uC5D0 \uCD94\uAC00\uB418\uC5C8\uC2B5\uB2C8\uB2E4.';//'즐겨 찾는 노선에 추가되었습니다.';
                            var alert_msg_delete_favorites = '\uC990\uACA8\uCC3E\uAE30 \uD574\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?';//'즐겨찾기 해제하시겠습니까?';
                            var alert_msg_dup_favorites = '\uC774\uBBF8 \uC990\uACA8\uCC3E\uAE30 \uB4F1\uB85D\uB418\uC5B4 \uC788\uC2B5\uB2C8\uB2E4.';//'이미 즐겨찾기 등록되어 있입니다.';
                            var alert_msg_max_favorites = '\uCD5C\uB300 5\uAC1C\uAE4C\uC9C0\uB9CC \uB4F1\uB85D \uAC00\uB2A5\uD569\uB2C8\uB2E4.';//'최대 3개까지만 등록 가능합니다.'; */
                            var alert_msg_choose_departure_airport = '\uCD9C\uBC1C\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.';//'출발지를 선택해주세요.';
                            var alert_msg_ruquest_login = '\uB85C\uADF8\uC778 \uD6C4 \uC11C\uBE44\uC2A4 \uC774\uC6A9\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4. \uB85C\uADF8\uC778 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?';//로그인 후 서비스 이용이 가능합니다.
                            var alert_msg_member_service = '\uD68C\uC6D0 \uC804\uC6A9 \uC11C\uBE44\uC2A4\uC785\uB2C8\uB2E4.';//회원 전용 서비스입니다.
                    
                            /**
                             * accordion activation
                             */
                            $(document).ready(function(){
                                // 현재 선택한 지역의 기본대륙 조회, 2019-10-15 jebaek
                                var baseContiCode = 'SKR';
                                var selectedContiCode = '';
                                $('.airportList').hide();
                                if('searchItr' == 'serviceInfo') {
                                    var depConti = $('input[name="depConti"]').val() != undefined ? $('input[name="depConti"]').val() : '';
                                    if(depConti != '') {
                                        $('.airportList_'+depConti).show();
                                    } else {
                                        $('.contiList').eq(0).find('a').addClass('on');
                                           $('.airportList').hide();
                                        $('.airportList').eq(1).show();
                                    }
                                } else {
                                    if(selectedContiCode != null && selectedContiCode != '') {
                                        $('.airportList_'+selectedContiCode).show();
                                    } else {
                                        $('.airportList_'+baseContiCode).show();
                                    }
                                }
                                
                            });
                    
                            /**
                             * 지역 선택에 따른 공항정보 노출
                             */
                            $(document).ready(function(){
                    
                                // 현재 선택한 지역 - title 선택됨으로 변경
                                $('.contiList a.on').attr('title','지역 선택됨');
                    
                                $('.contiList').bind('click', function(){
                    
                                    $.each($('.contiList,.favoritesList,.rsList'), function(index, el){
                                        $(el).find('a').removeClass('on').attr('title','지역 선택');
                                    });
                    
                                    $(this).find('a').addClass('on').attr('title','지역 선택됨');
                    
                                    var contiCode = $(this).data('conticode');
                    
                                    $('.airportList').hide();
                                    $('.airportList_'+contiCode).show();
                                    $('.sel_route_list.scroll .sel_tit').text('\uCDE8\uD56D\uC9C0');
                                });
                            });
                    
                            
                    
                            
                            /**
                             * 공항 선택
                             * callback : callBackDepartureAirport(el)
                             */
                            var _selectDepartureAirportCode = '';
                            var _selectCity = '';
                            var _selectAirport = '';
                            
                             // 웹접근성 심사 관련 기능 활성화 여부 (true : 활성화 / false : 비활성화)
                            var hideWebAccessCert = 'Y';
                    
                            var departureAirportElement = $('<li></li>');
                    
                            $(document).ready(function(){
                                if(_selectDepartureAirportCode!=''){
                                    departureAirportElement.data('airport_code',_selectDepartureAirportCode);
                                    departureAirportElement.data('city',_selectCity);
                                    departureAirportElement.data('airport',_selectAirport);
                                    $.each($('.contiList'), function(index, el){
                                        if($(el).data('conticode') == null) {
                                            $(el).addClass('on');
                                        }
                                    });
                                }
                            });
                    
                        
                    
                            var selectDepartureAirport = function(el) {
                    
                                _selectDepartureAirportCode = $(el).data('airport_code');
                                departureAirportElement = el;
                    
                                var text = $(el).data('city');
                                if($(el).data('city')!=$(el).data('airport')){
                                    text += '/'+$(el).data('airport');
                                }
                                
                                $('#routeDepartureAirportCode').html(_selectDepartureAirportCode);
                                $('#departureAirportName').html(text);
                    
                                // 검색어 필드 초기화
                                $('#departureAirportSearchKeyword').val('');
                                $('#departureAirportSearchKeyword').trigger('keyup');
                    
                                // 공항 선택시 자동 '확인'
                                if(isGnbRequest) {
                                    gnbCallBackDepartureAirport(departureAirportElement, 0, false, 'searchItr', hideWebAccessCert);
                                } else {
                                    callBackDepartureAirport(departureAirportElement, 0, false, 'searchItr', hideWebAccessCert);
                                }
                            };
                    
                            /**
                             * 선택 완료, 확인 버튼 이벤트 처리
                             * callback : callBackArrivalAirportConfirm()
                             */
                            var confirmDepartureAirport = function(){
                                if(_selectDepartureAirportCode==''){
                                    alert(alert_msg_choose_departure_airport);
                                    return false;
                                }
                    
                                // 출발공항 선택 레이어를 호출한 페이지에 구현된 callback function 호출
                                if(isGnbRequest){
                                    gnbCallBackDepartureAirport(departureAirportElement, 0, false, 'searchItr', hideWebAccessCert);
                                }
                                else{
                                    callBackDepartureAirport(departureAirportElement, 0, false, hideWebAccessCert);
                                }
                    
                    
                            };
                    
                    
                            /**
                             * 레이어 종료, 부모창 재호출
                             * callback : callBackOpener()
                             */
                            var routeDepartureCloseSelf = function(){
                                var hideLayerName = 'route_departure';
                                callBackOpener(hideLayerName);
                            };
                          //2019.03.29
                            /*
                            $(document).ready(function(){
                                $(".sel_area_list.scroll, .sel_route_list.scroll").mCustomScrollbar();
                                $(".sel_route_list.scroll").mCustomScrollbar();
                    
                                searchKeywordDepartureAirport($(".main_selec_search input[type='search']"));
                                if($(_routeSearchObject).val()!=''){
                                    $(_routeSearchObject).trigger('keyup');
                                }
                            });
                            */
                    
                            $(function(){
                                $('#route_departure .airportList_favorites li:last a.ico_bookmark'
                                    , '#route_departure .airportList_closest li:last a.ico_bookmark'
                                    ,'#route_departure .airportList_SKR li:last a.ico_bookmark'
                                    ,'#route_departure .airportList_JAP li:last a.ico_bookmark'
                                    , '#route_departure .airportList_NEA li:last a.ico_bookmark'
                                    , '#route_departure .airportList_SEA li:last a.ico_bookmark'
                                    , '#route_departure .airportList_CEA li:last a.ico_bookmark'
                                    ,'#route_departure .airportList_OCN li:last a.ico_bookmark').on('focusout', function() {

                                        $('.focus_start2').focus();
                                        $('#route_departure').remove();
                                });
                    
                            });
                        </script>
                    
                    
                    
                    </div>
                   
                    <!-- // 왕복 출발지 선택 div 종료-->
                    
                    <!-- 왕복 출발지 선택 script 시작 -->
                    <script>
                        /*
                        $(document).ready(function () {
                            console.log("script시작");
                            $("#route_departure").click(function () {
                                if($('#route_departure').css('display') == 'none'){
                                    console.log("if");
                                    $('#route_departure').css('display','block');
                                }else{
                                    console.log("else");
                                    $('#route_departure').css('display','none');
                                }
                            });
                        });
                        */    
                        
                        function dis() {
                            if($('#route_departure').css('display') == 'none'){
                                console.log("if");
                                $('#route_departure').show();
                            }else{
                                console.log("else");
                                $('#route_departure').hide();
                            }
                        };
                        
                    </script>
                    <!-- // 왕복 출발지 선택 script 종료 -->


                    <a class="btn_change" href="#none" onclick="exchangeAirport();">출발지/도착지 바꾸기</a>
                    
                    
                    
                    <div class="input_wrap end">
                        <label>도착지</label>
                        <input class="booking end focus_end1" onblur="checkAirportPinStatus(this, 0);" 
                                                                onclick="gnbSelectAirport(this, 0,'search','searchItr');" 
                                                                onkeypress="gnbSelectAirport(this, 0,'search','searchItr');" 
                                                                title="도착지 선택" type="text" value="" placeholder="도시/공항">
                        <a class="btn_pin end focus_end2" href="#none" onclick="gnbSelectAirport($(this).parent().find('input'), 0, 'region','searchItr');" readonly="" title="도착지 선택 레이어 열림">도착지 선택</a>
                        <!-- 선택 레이어 -->
                        <div class="selected_area end">
                            <a href="#" onclick="gnbSelectAirport($(this).parent().parent().find('input'), 0,'search','searchItr');">
                                <span class="eng">ICN</span>
                                <span class="area">서울/인천</span>
                            </a>
                        </div>
                        <!--// 선택 레이어 -->
                    </div>
                    
                    
                    <!-- 왕복 도착지 선택 div 시작-->
                


                    <!-- // 왕복 출발지 선택 div 시작-->

                </div>

            </li>
            <li>
                <div class="input_wrap date">
                    <label>탑승일</label>
                    <input class="booking date focus_date1" id="lostFlightDate1_1" 
                                                        placeholder="YYYY-MM-DD" readonly="readonly" title="출발일 선택" type="text" value="" 
                                                        onclick="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');" 
                                                        onkeypress="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');">
                    <span class="space">~</span>
                    <input class="booking date focus_date2" id="lostFlightDate1_2" placeholder="YYYY-MM-DD" readonly="readonly" title="도착일 선택" type="text" value="" onclick="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');">
                    <a class="btn_date focus_date3" href="#none" onclick="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');" 
                                                                onkeypress="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');">날짜선택</a>
                </div>
            </li>
        </ul>
    </div>
</div>
<!-- 왕복 -->

<!-- 편도 -->
<div class="tab_cont fixed schedule_box" id="booking02" tabindex="-1" style="display: none;">
    <div class="booking_input">
        <ul class="booking_form">
            <li>
                <div class="sel_route">
                    <div class="input_wrap start">
                        <label>출발지</label>
                        <input class="booking start focus_start1" onblur="checkAirportPinStatus(this, 0);" 
                                                                    onclick="gnbSelectAirport(this, 0,'search','searchItr');" 
                                                                    onkeypress="gnbSelectAirport(this, 0,'search','searchItr');" 
                                                                    readonly="" title="출발지 입력" type="text" value="" placeholder="도시/공항">
                        <a class="btn_pin focus_start2" href="#none" onclick="gnbSelectAirport($(this).parent().find('input'), 0, 'region','searchItr');" title="출발지 선택 레이어 열림">출발지 선택</a>

                        <!-- 선택 레이어 -->
                        <div class="selected_area start">
                            <a href="#" onclick="gnbSelectAirport($(this).parent().parent().find('input'), 0,'search','searchItr');">
                                <span class="eng">ICN</span>
                                <span class="area">서울/인천</span>
                            </a>
                        </div>
                        <!--// 선택 레이어 -->
                    </div>
                    <a class="btn_change" href="#none" onclick="exchangeAirport();">출발지/도착지 바꾸기</a>
                    <div class="input_wrap end">
                        <label>도착지</label>
                        <input class="booking end focus_end1" onblur="checkAirportPinStatus(this, 0);" 
                                                                onclick="gnbSelectAirport(this, 0,'search','searchItr');" 
                                                                onkeypress="gnbSelectAirport(this, 0,'search','searchItr');" 
                                                                readonly="" title="도착지 입력" type="text" value="" placeholder="도시/공항">
                        <a class="btn_pin end focus_end2" href="#none" onclick="gnbSelectAirport($(this).parent().find('input'), 0, 'region','searchItr');" title="도착지 선택 레이어 열림">도착지 선택</a>
                        <!-- 선택 레이어 -->
                        <div class="selected_area end">
                            <a href="#" onclick="gnbSelectAirport($(this).parent().parent().find('input'), 0,'search','searchItr');">
                                <span class="eng">ICN</span>
                                <span class="area">서울/인천</span>
                            </a>
                        </div>
                        <!--// 선택 레이어 -->
                    </div>
                </div>
            </li>
            <li>
                <div class="input_wrap date">
                    <label>탑승일</label>
                    <input class="booking date focus_date1" id="lostFlightDate2_1" placeholder="YYYY-MM-DD" readonly="readonly" title="출발일 입력" type="text" value="" onclick="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');" onkeypress="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');">
                    <a class="btn_date focus_date3" href="#none" title="출발일 선택 레이어 열림" onclick="gnbCallBackArrivalAirportConfirm(null, 'searchItr', 'KRW', 'N');">출발일 선택</a>
                </div>
            </li>
        </ul>
    </div>
</div>
<!-- 편도 -->


<!--// Tab 컨텐츠 -->

<!-- 인원수 입력 -->
<div class="pax booking_input section_passenger">
    <ul class="booking_form">
        <li>
            <div class="input_wrap passenger focus">
                <!-- 성인 -->
                <dl>
                    <dt>
                        <label for="adult">성인</label>
                    </dt>
                    <dd class="sel_passenger">
                        <a class="btn_minus" href="#none" onclick="changePaxCount('ADULT', -1);">성인 인원감소</a>
                        <input class="booking passenger ADULT" data-div="ADULT" id="adult" onkeyup="onlyNumReplace(this, 1);" title="성인 인원수" type="text" value="1">
                        <a class="btn_plus" href="#none" onclick="changePaxCount('ADULT', 1);">성인 인원증가</a>
                    </dd>
                </dl>
                <!--// 성인 -->
                <!-- 소아 -->
                <dl>
                    <dt>
                        <label for="kid">
                                소아
                            <a class="btn_tooltip gray" href="#none">
                                <span class="blind">툴팁</span>
                                <div class="tooltip_layer" style="display: none;">
                                    <div class="tooltip_tit">
                                        <img alt="" src="https://contents-image.twayair.com/homepage/images/ico/ico_kid.png">
                                        <h5>소아기준</h5>
                                    </div>
                                    <div class="tooltip_cont">
                                        <dl>
                                            <dt>국내선</dt>
                                            <dd>만 2세~<span class="red">13세</span> 미만</dd>
                                        </dl>
                                        <dl>
                                            <dt>국제선</dt>
                                            <dd>만 2세~<span class="red">12세</span> 미만</dd>
                                        </dl>
                                        <ul class="info"><li>※ 소아/유아 기준</li>
<li>&nbsp; &nbsp; - 국내선 : 각 항공편의 탑승일 기준</li>
<li>&nbsp; &nbsp; - 국제선 : 최초 출발일 기준</li>
<li>※ 탑승 수속 시 생년월일 확인 가능한 서류 지참 필수</li></ul>
                                    </div>
                                </div>
                            </a>
                        </label>
                    </dt>
                    <dd class="sel_passenger">
                        <a class="btn_minus" href="#none" onclick="changePaxCount('CHILD', -1);">소아 인원감소</a>
                        <input class="booking passenger CHILD" data-div="CHILD" id="kid" onkeyup="onlyNumReplace(this, 0);" title="소아 인원수" type="text" value="0">
                        <a class="btn_plus" href="#none" onclick="changePaxCount('CHILD', 1);">소아 인원증가</a>
                    </dd>
                </dl>
                <!--// 소아 -->
                <!-- 유아 -->
                <dl>
                    <dt>
                        <label for="baby">
                                유아
                            <a class="btn_tooltip gray" href="#none">
                                <span class="blind">툴팁</span>
                                <div class="tooltip_layer" style="display: none;">
                                    <div class="tooltip_tit">
                                        <img alt="" src="https://contents-image.twayair.com/homepage/images/ico/ico_baby.png">
                                        <h5>유아기준</h5>
                                    </div>
                                    <div class="tooltip_cont">
                                        <dl>
                                            <dt>국내선</dt>
                                            <dd>생후 <span class="red">7일</span>~ 만 2세 미만</dd>
                                        </dl>
                                        <dl>
                                            <dt>국제선</dt>
                                            <dd>생후 <span class="red">14일</span>~ 만 2세 미만</dd>
                                        </dl>
                                        <ul class="info"><li>※ 소아/유아 기준</li>
<li>&nbsp; &nbsp; - 국내선 : 각 항공편의 탑승일 기준</li>
<li>&nbsp; &nbsp; - 국제선 : 최초 출발일 기준</li>
<li>※ 탑승 수속 시 생년월일 확인 가능한 서류 지참 필수</li></ul>
                                    </div>
                                </div>
                            </a>
                        </label>
                    </dt>
                    <dd class="sel_passenger">
                        <a class="btn_minus" href="#none" onclick="changePaxCount('INFANT', -1);">유아 인원감소</a>
                        <input class="booking passenger INFANT" data-div="INFANT" id="baby" onkeyup="onlyNumReplace(this, 0);" title="유아 인원수" type="text" value="0">
                        <a class="btn_plus" href="#none" onclick="changePaxCount('INFANT', 1);">유아 인원증가</a>
                    </dd>
                </dl>
                <!--// 유아 -->
            </div>
            <button class="sbtn_cont age_cal" date-id="age_calculater_layer" date-type="layer" onclick="howOldAreYou();" title="레이어 팝업 열림" type="button">나이 계산기</button>
        </li>
       
    </ul>
</div>
<!--// 인원수 입력 -->
</div>
<!--// Input Booking -->



<!--// 컨텐츠 영역 -->






<div class="section debug">

<form id="airAvailabilityRQ" method="post" name="airAvailabilityRQ" action="/app/booking/chooseItinerary">
    <input name="searchDate" type="hidden">
    <input name="promoCode" type="hidden">
    search ticket : <input class="bookingTicket" name="bookingTicket" type="text" value="">

    <!--tripType - 여정타입 선택 왕복/편도 -->
    <div>
        
            <input type="radio" id="tripType_RT" value="RT" name="tripType" checked="checked">
            <label for="tripType_RT">
                
                    왕복
                    
                    
                
            </label> &nbsp;
        
        
            <input type="radio" id="tripType_OW" value="OW" name="tripType">
            <label for="tripType_OW">
                
                    
                    편도
                    
                
            </label> &nbsp;
        
        
    </div>

    


    <!--사용자 선택 정보, publishing 적용시 hidden 처리 할 정보 영역-->
    <div style="border: solid 5px grey;">



        <div>

            <span style="font-weight:bold;">Flight 1</span>

            from <input class="reset_target" type="text" id="availabilitySearches0.depAirport" name="availabilitySearches[0].depAirport" value="">

            to : <input class="reset_target" type="text" id="availabilitySearches0.arrAirport" name="availabilitySearches[0].arrAirport" value="">

            departure : <input class="reset_target" type="text" id="availabilitySearches0.flightDate" name="availabilitySearches[0].flightDate" value="">
        </div>
        

        <div>
            성인 : <input class="reset_target" id="paxCountDetails0.paxCount" name="paxCountDetails[0].paxCount" type="text" value="0">
            소아 : <input class="reset_target" id="paxCountDetails1.paxCount" name="paxCountDetails[1].paxCount" type="text" value="0">
            유아 : <input class="reset_target" id="paxCountDetails2.paxCount" name="paxCountDetails[2].paxCount" type="text" value="0">
            
        </div>

        <div>
            도시명 출발 : <input class="reset_target" type="text" name="availabilitySearches[0].depAirportName" value="">
            도착 : <input class="reset_target" type="text" name="availabilitySearches[0].arrAirportName" value="">
        </div>

    </div>

<input type="hidden" name="_csrf" value="340886c7-daf0-4e0c-aad4-2ebb87e25c48"></form>


<script type="text/javascript">

    var _pax_list = [{'paxCount':1,'paxType':'ADULT'},{'paxCount':0,'paxType':'CHILD'},{'paxCount':0,'paxType':'INFANT'}];
    var _pax_type = {'ADULT':0, 'CHILD':1, 'INFANT':2  }

    $.each(_pax_list, function(pi,pp){
        if($.trim(pp.paxType)!=''){
            $('#airAvailabilityRQ input[name="paxCountDetails['+ _pax_type[pp.paxType] +'].paxCount"]').val(pp.paxCount);
        }
    });
</script>

</div>



<!-------------스크립트1------------------------>





<script type="text/javascript">


//입력값이 있을때 표시
$('.input_wrap input.booking').on('keydown keyup change', function(){
    var Length = $(this).val().length;
    if(Length > 0){
        $(this).parents('.input_wrap').addClass('on');
    }else{
        $(this).parents('.input_wrap').removeClass('on');
    }
});


/**
 * 공항 검색 input box focus out 된 경우 아이콘 처리
 */
var checkAirportPinStatus = function(inputObj, routeIndex){

    var tripType = $('input[name="tripType"]:checked').val();

    if($(inputObj).hasClass('start') && $('input[name="availabilitySearches['+routeIndex+'].depAirport"]').val()!=''){
        $(inputObj).parents('div.input_wrap').find('div.selected_area').addClass('on');
        $(inputObj).parents('div.input_wrap').addClass('focus');
    }
    else if($(inputObj).hasClass('end') && $('input[name="availabilitySearches['+routeIndex+'].arrAirport"]').val()!=''){
        $(inputObj).parents('div.input_wrap').find('div.selected_area').addClass('on');
        $(inputObj).parents('div.input_wrap').addClass('focus');
    }
    else{
        $(inputObj).parents('div.input_wrap').find('div.selected_area').removeClass('on');
        $(inputObj).parents('div.input_wrap').removeClass('focus');
    }

};

/**
 * 레이어 바깥부분 클릭한 경우 모든 레이어 숨김
 */
$(document).ready(function(){
    $.fn.bookingCommonLayerClick();
});

/**
 * 한국지역 선택시에만 단체 선택 노출
 */
$(document).ready(function(){
    /*
    // 한국지역이 아닌경우 단체 미노출, if('KR' != 'KR'){
    if('KR' != 'KR'){
        $('div.res_grouping').hide();
    }
    */
});

/**
 * trip type 선택 event handling
 */
$(document).ready(function(){

    var frm = $('#airAvailabilityRQ');

    $('div.booking_option input[name="tripTypeButton"]').on('change', function(){
        var tripType = $('div.booking_option input[name="tripTypeButton"]:checked').val();

        $.each(frm.find('input[name="tripType"]'),function(index,el){
            if($(el).val()==tripType){
                $(el).prop('checked',true);
                checkTripType();
            }
        });
    });

});


/**
 * 출발노선선택 레이어 준비
 */
$(document).ready(function(){
    // routeDeparture($('input[name="tripType"]:checked').val());
});

/**
 * TripType 선택시 출발노선 레이어 준비
 */
// $('input[name="tripType"]').change(function(){
//     removeLayer('route_departure');
//     routeDeparture($(this).val());
// });

/**
 * 탑승객 수 선택 event handling
 */
$(document).ready(function(){

    // RQ
    var pax_count = {};
    pax_count = {'ADULT' : 0, 'CHILD' : 0, 'INFANT' : 0 };

    var _pax_list = [{'paxCount':1,'paxType':'ADULT'},{'paxCount':0,'paxType':'CHILD'},{'paxCount':0,'paxType':'INFANT'}];

    $.each(_pax_list, function(pi,pp){
        if($.trim(pp.paxType)!=''){
            pax_count[pp.paxType] = pp.paxCount;
        }
    });

    $.each($('.pax input'), function(){
        if(parseInt(pax_count[$(this).data('div')],10) > 0){
            $(this).val(pax_count[$(this).data('div')]);
        }
    });

    // 성인 탑승자수 변경 이벤트 처리
    $('.pax input').change(function(){
        choosePaxCount($(this));
    });

});

var changePaxCount = function(div, count){

    // console.log('#### changePaxCount : ' + div +'/'+count);
    var paxCount = parseInt($('.pax input.'+div).val(),10);

    if(count>0){
        $('.pax input.'+div).val(paxCount+1);
    }
    else if(div =='ADULT' && count<0 && paxCount>1){
        $('.pax input.'+div).val(paxCount-1);
    }
    else if(div !='ADULT' && count<0 && paxCount>0){
        $('.pax input.'+div).val(paxCount-1);
    }

    choosePaxCount($('.pax input.'+div));

};



/**
 * 인원선택 변경에 따른 bookingType 전환
 */
var setBookingType = function(){

    var paxCount = parseInt($('.pax input.ADULT').val(),10) + parseInt($('.pax input.CHILD').val(),10);

    // console.log('setBookingType : ' + paxCount);

    $.each($('input[name="bookingType"]'), function(index,el){

        // 개인만 가능한 최대 9명
        if($(el).val()=='HI' && paxCount<10){

            $('input.bookingTypeGroup').prop('checked', false);

            $(el).prop('checked', true);
            // $('#controlRouteCountButtonSection').show(); // 다구간 구간 증/감 버튼 영역 노출

            $('input[name="paxCountDetails[0].paxCount"]').val($('.pax input.ADULT').val());
            $('input[name="paxCountDetails[1].paxCount"]').val($('.pax input.CHILD').val());
            $('input[name="paxCountDetails[2].paxCount"]').val($('.pax input.INFANT').val());
        }
        
    });

    pax_count_before_change[0] = parseInt($('input[name="paxCountDetails[0].paxCount"]').val(),10);
    pax_count_before_change[1] = parseInt($('input[name="paxCountDetails[1].paxCount"]').val(),10);
    pax_count_before_change[2] = parseInt($('input[name="paxCountDetails[2].paxCount"]').val(),10);
};

var pax_count_individual = 9; // 개인 최대 인원 수
var pax_count_before_change = [1,0,0]; // 인원수 변경 이전 최종 여행객 수
var alert_msg_max_pax = '\uC131\uC778\uACFC \uC18C\uC544 \uC778\uC6D0\uC744 \uD569\uD574 30\uBA85\uAE4C\uC9C0 \uC120\uD0DD \uAC00\uB2A5\uD569\uB2C8\uB2E4.';//'성인과 소아 인원을 합해 30명까지 선택 가능합니다.';
var alert_msg_max_infant_pax = '\uC720\uC544 1\uBA85\uB2F9 \uC131\uC778 1\uBA85\uC774 \uBC18\uB4DC\uC2DC \uB3D9\uBC18\uB418\uC5B4\uC57C \uD569\uB2C8\uB2E4.';//'유아 1명당 성인 1명이 반드시 동반되어야 합니다.';
var alert_msg_chage_group_booking = '\uB2E8\uCCB4 \uD56D\uACF5\uAD8C \uAC80\uC0C9\uC744 \uC704\uD574 \uC120\uD0DD\uD55C \uC815\uBCF4\uB97C \uCD08\uAE30\uD654 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?';//'단체 항공권 검색을 위해 선택한 정보를 초기화 하시겠습니까?';
var alert_msg_chage_individual_booking = '\uD56D\uACF5\uAD8C \uC7AC \uAC80\uC0C9\uC744 \uC704\uD574 \uC120\uD0DD\uD55C \uC815\uBCF4\uB97C \uCD08\uAE30\uD654 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?';// '항공권 재 검색을 위해 선택한 정보를 초기화 하시겠습니까?';

$(document).ready(function(){
    pax_count_before_change[0] = parseInt($('input[name="paxCountDetails[0].paxCount"]').val(),10);
    pax_count_before_change[1] = parseInt($('input[name="paxCountDetails[1].paxCount"]').val(),10);
    pax_count_before_change[2] = parseInt($('input[name="paxCountDetails[2].paxCount"]').val(),10);
});

var choosePaxCount = function(el){


    // 구분별 탑승자수
    var pax_count = [];
    pax_count.push(parseInt($('.pax input.ADULT').val(),10)); // 성인
    pax_count.push(parseInt($('.pax input.CHILD').val(),10)); // 소아
    pax_count.push(parseInt($('.pax input.INFANT').val(),10)); // 유아

    // console.log('여행객 수 변경 '+(pax_count_before_change[0]+pax_count_before_change[1])+'->'+(pax_count[0]+pax_count[1]))

    // console.log(pax_count[0]+'/'+pax_count[1]+'/'+pax_count[2]);

    /// 개인 -> 단체 전환/ 단체 -> 개인 전환 처리부분 삭제       

    // 유아 탑승자수 변경 이벤트 처리
    // if($(el).hasClass('INFANT')){
        // 성인 숫자보다 많은 경우
        if(pax_count[0] < pax_count[2]){
            alert(alert_msg_max_infant_pax);
            pax_count[2] = pax_count[0];
            $('.pax input.INFANT').val(pax_count[2]);
            pax_count_before_change[2] = pax_count[2];
        }
    // };

    $('input[name="paxCountDetails[0].paxCount"]').val(pax_count[0]);
    $('input[name="paxCountDetails[1].paxCount"]').val(pax_count[1]);
    $('input[name="paxCountDetails[2].paxCount"]').val(pax_count[2]);

};

/**
 * 입력폼 초기화
 */
var initSearchForm = function(){

    /**
     * airAvailabilityRQ form reset
     */
    $('#airAvailabilityRQ input.reset_target').val('');

    /**
     * display 영역 초기화
     */
    // tripType = RT
    // $('div.tab_section ul.chk_rdo_list input[name="tripTypeButton"]').eq(0).prop('checked', true);
    // $('div.tab_section ul.chk_rdo_list input[name="tripTypeButton"]').trigger('change');
    checkTripType();

    // 왕복/편도 공항, 출도착일 정보
    var alert_msg_city_airport = '\uB3C4\uC2DC/\uACF5\uD56D';

    $('#booking01 div.start').removeClass('focus');
    $('#booking01 div.start div.selected_area').removeClass('on');

    $('#booking01 div.end').removeClass('focus');
    $('#booking01 div.end div.selected_area').removeClass('on');

    $('#booking01 div.date').removeClass('focus');
    $('#booking01 div.date input').val('');


    $('#booking02 div.start').removeClass('focus');
    $('#booking02 div.start div.selected_area').removeClass('on');

    $('#booking02 div.end').removeClass('focus');
    $('#booking02 div.end div.selected_area').removeClass('on');

    $('#booking02 div.date').removeClass('focus');
    $('#booking02 div.date input').val('');


    $('input[name="paxCountDetails[0].paxCount"]').val($('.pax input.ADULT').val());
    $('input[name="paxCountDetails[1].paxCount"]').val($('.pax input.CHILD').val());
    $('input[name="paxCountDetails[2].paxCount"]').val($('.pax input.INFANT').val());

    setBookingType();

};

/**
 * tripType 선택에 따른 form control
 */
$(document).ready(function(){

    // set event handler
    $('input[name="tripType"]').change(function(){
        checkTripType();
    });

    checkTripType();
});

var checkTripType = function(){
    var tripType = $('input[name="tripType"]:checked').val();
    $('ul.sel_section li').removeClass('on');

    // 왕복
    if(tripType == 'RT'){
        $('#booking01').show();
        $('#booking02').hide();
        $('#booking03').hide();

        $('ul.sel_section li').eq(0).addClass('on');
        $('ul.sel_section li a').removeAttr('title');
        $('ul.sel_section li.on a').attr('title','선택됨');


        // 편도 출발정보가 있는 경우 돌아오는편 정보에 설정
        if($('input[name="availabilitySearches[0].depAirport"]').val()!='' && $('input[name="availabilitySearches[0].arrAirport"]').val()!=''){
            $('input[name="availabilitySearches[1].depAirport"]').val($('input[name="availabilitySearches[0].arrAirport"]').val());
            $('input[name="availabilitySearches[1].arrAirport"]').val($('input[name="availabilitySearches[0].depAirport"]').val());
        }

    }
    // 편도
    else if(tripType == 'OW') {
        $('#booking01').hide();
        $('#booking02').show();
        $('#booking03').hide();
        $('ul.sel_section li').eq(1).addClass('on');
        $('ul.sel_section li a').removeAttr('title');
        $('ul.sel_section li.on a').attr('title','선택됨');

        // 날짜 표출 영역, 출발일만 노출
        // console.log($('#booking01 .multiple .wave').length);
        // console.log($('#booking01 .multiple .wave').html());

    }
   
};




/**
 * 여정선택완료, 다음으로 이동
 */
var chooseItinerary = function(){

    //check csrf Token - 200212 PJH
    try{
        checkCsrfToken('340886c7-daf0-4e0c-aad4-2ebb87e25c48','_csrf');
    } catch (e) {
        console.log('checkCsrfToken Exception');
    }

    var alert_msg_choose_itinerary = '\uC5EC\uD589\uD558\uC2E4 \uB178\uC120\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.'; //여행하실 노선을 선택해주세요.
    var alert_msg_choose_schedule = '\uCD9C\uBC1C\uC77C\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.'; // 출발일을 선택해주세요.
    var alert_msg_choose_schedule_roundtrip = '\uCD9C/\uB3C4\uCC29\uC77C\uC744 \uBAA8\uB450 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.'; // 출/도착일을 모두 선택해주세요.
    var alert_msg_check_promocode = '\uC785\uB825\uD558\uC2E0 \uD504\uB85C\uBAA8\uC158\uCF54\uB4DC\uC758 \uD560\uC778\uADDC\uC815\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694.'; // '입력하신 프로모션코드의 할인규정을 확인해주세요.';
    var alert_msg_promocode_login = '\uD574\uB2F9 \uD504\uB85C\uBAA8\uC158 \uCF54\uB4DC\uB294 \uD68C\uC6D0 \uB85C\uADF8\uC778 \uC774\uD6C4 \uC0AC\uC6A9\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4.'; // '해당 프로모션 코드는 로그인 이후 사용이 가능합니다.';
    var alert_msg_promocode_already_use = '\uD574\uB2F9 \uD504\uB85C\uBAA8\uC158 \uCF54\uB4DC\uB294 \uC774\uBBF8 \uC0AC\uC6A9\uD55C \uC774\uB825\uC774 \uC874\uC7AC\uD569\uB2C8\uB2E4.'; // '해당 프로모션 코드는 이미 사용한 이력이 존재합니다.';
    var alert_msg_connect_flight_surface = '{0}\uBC88\uC9F8 \uAD6C\uAC04\uC758 \uB3C4\uCC29\uACF5\uD56D\uACFC {1}\uBC88\uC9F8 \uAD6C\uAC04 \uCD9C\uBC1C\uACF5\uD56D\uC740 \uAC19\uC740 \uC9C0\uC5ED(\uB300\uB959)\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.'; // '{0}번째 구간의 도착공항과 {1}번째 구간 출발공항은 같은 지역(대륙)이어야 합니다.';
    var alert_msg_connect_flight_surface_reverse = '{0}\uBC88\uC9F8 \uAD6C\uAC04\uC758 \uCD9C\uBC1C\uACF5\uD56D\uACFC {1}\uBC88\uC9F8 \uAD6C\uAC04 \uB3C4\uCC29\uACF5\uD56D\uC740 \uAC19\uC740 \uC9C0\uC5ED(\uB300\uB959)\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4.'; // '{0}번째 구간의 출발공항과 {1}번째 구간 도착공항은 같은 지역(대륙)이어야 합니다.';
    var alert_msg_max_length_stay = '\uCCAB\uBC88\uC9F8 \uAD6C\uAC04\uC758 \uCD9C\uBC1C\uC77C\uC5D0\uC11C \uB9C8\uC9C0\uB9C9 \uAD6C\uAC04\uC758 \uB3C4\uCC29\uC77C\uAE4C\uC9C0\uC758 \uAE30\uAC04\uC740 365\uC77C\uC744 \uCD08\uACFC\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.'; // '첫번째 구간의 출발일에서 마지막 구간의 도착일까지의 기간은 365일을 초과할 수 없습니다.';
    var alert_msg_connect_schedule = '\uAD6C\uAC04{0}\uC758 \uCD9C\uBC1C\uC77C\uC740 \uAD6C\uAC04{1}\uC758 \uCD9C\uBC1C\uC77C\uBCF4\uB2E4 \uBE60\uB978\uB0A0\uC9DC\uB97C \uC120\uD0DD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.'; // '구간{0}의 출발일은 구간{1}의 출발일보다 빠른날짜를 선택할 수 없습니다.';
    var alert_msg_connect_combination = '\uB2E4\uAD6C\uAC04 \uC5EC\uC815\uC740 \uAD6D\uC81C\uC120, \uAD6D\uB0B4\uC120 \uB178\uC120\uC744 \uD568\uAED8 \uC608\uC57D\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.';// '다구간 여정은 국제선, 국내선 노선을 함께 예약할 수 없습니다.'
    var alert_msg_check_adult_cnt = '\uC131\uC778 \uD0D1\uC2B9\uAC1D \uC218\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694';// '성인 탑승객 수를 선택해주세요'

    var frm = $('#airAvailabilityRQ');

    frm.find('input.rqParam').remove();
    frm.find('input[name="schedule"]').remove();

    // 탑승객
    frm.append('<input type="hidden" name="pax" class="rqParam" value="'+ $('input[name="paxCountDetails[0].paxCount"]').val() +'"/>');
    frm.append('<input type="hidden" name="pax" class="rqParam" value="'+ $('input[name="paxCountDetails[1].paxCount"]').val() +'"/>');
    frm.append('<input type="hidden" name="pax" class="rqParam" value="'+ $('input[name="paxCountDetails[2].paxCount"]').val() +'"/>');

   

    $('input[name="searchDate"]').val(new Date().toISOString().slice(4, 10).replace(/-/g, ""));
    //왕복
    if($('#tripType_RT:checked').length==1) {

        // 노선 선택 여부
        if($('input[name="availabilitySearches[0].depAirport"]').val()=='' || $('input[name="availabilitySearches[1].depAirport"]').val()==''
            || $('input[name="availabilitySearches[0].arrAirport"]').val()=='' || $('input[name="availabilitySearches[1].arrAirport"]').val()==''){
            alert(alert_msg_choose_itinerary);
            $('#booking01 input.booking.start').focus();
            return false;
        }

        // 출/도착일 선택 여부
        if($('input[name="availabilitySearches[0].flightDate"]').val()=='' || $('input[name="availabilitySearches[1].flightDate"]').val()==''){
            alert(alert_msg_choose_schedule_roundtrip);
            $('#booking01 input.booking.date.focus_date1').focus();
            return false;
        }


          //출도착 공항이 같은 경우 편도로 변경하여 form submit
        if ($('input[name="availabilitySearches[0].depAirport"]').val() == $('input[name="availabilitySearches[0].arrAirport"]').val())
           {
            // 출발공항정보
            frm.append('<input type="hidden" name="deptAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[0].depAirport"]').val() +'"/>');
            // 도착공항정보
            frm.append('<input type="hidden" name="arriAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[0].arrAirport"]').val() +'"/>');
            // 출발일 정보
            frm.append('<input type="hidden" name="schedule" class="rqParam" value="'+ $('input[name="availabilitySearches[0].flightDate"]').val() +'"/>');

            $('#display_tripType_OW').prop('checked',true);
            $('#tripType_OW').prop('checked',true);
           }
        else
        {
            // 출발공항정보
            frm.append('<input type="hidden" name="deptAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[0].depAirport"]').val() +'"/>');
            frm.append('<input type="hidden" name="deptAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[1].depAirport"]').val() +'"/>');

            // 도착공항정보
            frm.append('<input type="hidden" name="arriAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[0].arrAirport"]').val() +'"/>');
            frm.append('<input type="hidden" name="arriAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[1].arrAirport"]').val() +'"/>');

            // 출발일 정보
            frm.append('<input type="hidden" name="schedule" class="rqParam" value="'+ $("#lostFlightDate1_1").val() +'"/>');
            frm.append('<input type="hidden" name="schedule" class="rqParam" value="'+ $("#lostFlightDate1_2").val() +'"/>');
        }
    }
    // 편도
    else if($('#tripType_OW:checked').length==1) {

        // 노선 선택 여부
        if($('input[name="availabilitySearches[0].depAirport"]').val()=='' || $('input[name="availabilitySearches[0].arrAirport"]').val()==''){
            alert(alert_msg_choose_itinerary);
            $('#booking02 input.booking.start').focus();
            return false;
        }

        // 출발일 선택 여부
        if($('input[name="availabilitySearches[0].flightDate"]').val()==''){
            alert(alert_msg_choose_schedule);
            $('#booking02 input.booking.date.focus_date1').focus();
            return false;
        }

        // 출발공항정보
        frm.append('<input type="hidden" name="deptAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[0].depAirport"]').val() +'"/>');

        // 도착공항정보
        frm.append('<input type="hidden" name="arriAirportCode" class="rqParam" value="'+ $('input[name="availabilitySearches[0].arrAirport"]').val() +'"/>');

        // 출발일 정보
        frm.append('<input type="hidden" name="schedule" class="rqParam" value="'+ $("#lostFlightDate2_1").val() +'"/>');

    }
   

};

/**
 * 왕복/편도 여정에 대한 reverse 기능, ICN->NRT -> NRT->ICN
 */
var deptAirport = {}; // 출발
var arrAirport = {}; // 도착
var tempAirport = {}; // 임시

var exchangeAirport = function () {

    var deptAirportObjRoute1 = $('input[name="availabilitySearches[0].depAirport"]');
    var arrAirportObjRoute1 = $('input[name="availabilitySearches[0].arrAirport"]');

    var deptAirportObjRoute2 = $('input[name="availabilitySearches[1].depAirport"]');
    var arrAirportObjRoute2 = $('input[name="availabilitySearches[1].arrAirport"]');

    if(deptAirportObjRoute1.val()=='' || arrAirportObjRoute1.val()==''){
        return false;
    }

    deptAirport = {
        'val':deptAirportObjRoute1.val()
        ,'city':deptAirportObjRoute1.data('city')
        ,'airport':deptAirportObjRoute1.data('airport')
        ,'airport_code':deptAirportObjRoute1.data('airport_code')
        ,'conti':deptAirportObjRoute1.data('conti')
    };
    arrAirport = {
        'val':arrAirportObjRoute1.val()
        ,'city':arrAirportObjRoute1.data('city')
        ,'airport':arrAirportObjRoute1.data('airport')
        ,'airport_code':arrAirportObjRoute1.data('airport_code')
        ,'conti':arrAirportObjRoute1.data('conti')
    };

    // 출발정보 -> 임시저장
    tempAirport = deptAirport;

    // 도착정보 -> 출발정보, 출발정보 표기 변경
    deptAirport = arrAirport;
    // $('#booking01 .departure .airport_name').text(airportDisplayText(deptAirport));
    // $('#booking01 .departure .airport_code').text(deptAirport['airport_code']);

    $('#booking01 div.start div.selected_area').find('span.area').text(airportDisplayText(deptAirport));
    $('#booking01 div.start div.selected_area').find('span.eng').text(deptAirport['airport_code']);

    $('#booking02 div.start div.selected_area').find('span.area').text(airportDisplayText(deptAirport));
    $('#booking02 div.start div.selected_area').find('span.eng').text(deptAirport['airport_code']);

    deptAirportObjRoute1.val(arrAirport['val']);
    deptAirportObjRoute1.data('city', arrAirport['city']);
    deptAirportObjRoute1.data('airport', arrAirport['airport']);
    deptAirportObjRoute1.data('airport_code', arrAirport['airport_code']);
    deptAirportObjRoute1.data('conti', arrAirport['conti']);

    arrAirportObjRoute2.val(arrAirport['val']);
    arrAirportObjRoute2.data('city', arrAirport['city']);
    arrAirportObjRoute2.data('airport', arrAirport['airport']);
    arrAirportObjRoute2.data('airport_code', arrAirport['airport_code']);
    arrAirportObjRoute2.data('conti', arrAirport['conti']);

    // 임시저장 -> 도착정보, 돡장버 표기 변경
    arrAirport = tempAirport;
    // $('#booking01 .arrival .airport_name').text(airportDisplayText(arrAirport));
    // $('#booking01 .arrival .airport_code').text(arrAirport['airport_code']);
    $('#booking01 div.end div.selected_area').find('span.area').text(airportDisplayText(arrAirport));
    $('#booking01 div.end div.selected_area').find('span.eng').text(arrAirport['airport_code']);

    $('#booking02 div.end div.selected_area').find('span.area').text(airportDisplayText(arrAirport));
    $('#booking02 div.end div.selected_area').find('span.eng').text(arrAirport['airport_code']);

    arrAirportObjRoute1.val(tempAirport['val']);
    arrAirportObjRoute1.data('city', tempAirport['city']);
    arrAirportObjRoute1.data('airport', tempAirport['airport']);
    arrAirportObjRoute1.data('airport_code', tempAirport['airport_code']);
    arrAirportObjRoute1.data('conti', tempAirport['conti']);

    deptAirportObjRoute2.val(arrAirport['val']);
    deptAirportObjRoute2.data('city', arrAirport['city']);
    deptAirportObjRoute2.data('airport', arrAirport['airport']);
    deptAirportObjRoute2.data('airport_code', arrAirport['airport_code']);
    deptAirportObjRoute2.data('conti', arrAirport['conti']);
};



/**
 * 출/도착지 정보의 노출정보 TEXT 정리
 */
var airportDisplayText = function(el){

    var text = el['city'];
    if(el['city']!=el['airport']){
        text += '/'+el['airport'];
    }
    // text += ' '+el['airport_code'];
    return text;
};


/**
 * 저장된 RQ가 있는경우 정보 표출
 */
$(document).ready(function(){
    reformAirAvailabilityRQInfo();
});

var reformAirAvailabilityRQInfo = function(){

    $.each($('div.tab_section ul.chk_rdo_list input[name="tripTypeButton"]'),function(){
        if($(this).val()==$('#airAvailabilityRQ input[name="tripType"]:checked').val()){
            $(this).prop('checked', true);
        }
    });


    // 노선정보
    if($('input[name="availabilitySearches[0].depAirport"]').val()!='' && $('input[name="availabilitySearches[0].arrAirport"]').val()!=''){

        $('#booking01 div.start').addClass('focus');
        $('#booking01 div.start div.selected_area').addClass('on');
        $('#booking01 div.start div.selected_area').find('span.area').text($('input[name="availabilitySearches[0].depAirportName"]').val());
        $('#booking01 div.start div.selected_area').find('span.eng').text($('input[name="availabilitySearches[0].depAirport"]').val());

        $('#booking01 div.end').addClass('focus');
        $('#booking01 div.end div.selected_area').addClass('on');
        $('#booking01 div.end div.selected_area').find('span.area').text($('input[name="availabilitySearches[0].arrAirportName"]').val());
        $('#booking01 div.end div.selected_area').find('span.eng').text($('input[name="availabilitySearches[0].arrAirport"]').val());


        $('#booking02 div.start').addClass('focus');
        $('#booking02 div.start div.selected_area').addClass('on');
        $('#booking02 div.start div.selected_area').find('span.area').text($('input[name="availabilitySearches[0].depAirportName"]').val());
        $('#booking02 div.start div.selected_area').find('span.eng').text($('input[name="availabilitySearches[0].depAirport"]').val());

        $('#booking02 div.end').addClass('focus');
        $('#booking02 div.end div.selected_area').addClass('on');
        $('#booking02 div.end div.selected_area').find('span.area').text($('input[name="availabilitySearches[0].arrAirportName"]').val());
        $('#booking02 div.end div.selected_area').find('span.eng').text($('input[name="availabilitySearches[0].arrAirport"]').val());

    }

    // 탑승일 정보
    if($('input[name="availabilitySearches[0].flightDate"]').val()!=''){

        $('#booking01 div.input_wrap.date').addClass('focus');
        $('#booking01 input.booking.date').eq(0).val($('input[name="availabilitySearches[0].flightDate"]').val());
        $('#booking01 input.booking.date').eq(1).val($('input[name="availabilitySearches[1].flightDate"]').val());

        if($('input[name="availabilitySearches[1].flightDate"]').val()!=''){
            $('#booking01 input.booking.date').eq(0).val($('input[name="availabilitySearches[0].flightDate"]').val());
        }


        $('#booking02 div.input_wrap.date').addClass('focus');
        $('#booking02 input.booking.date').eq(0).val($('input[name="availabilitySearches[0].flightDate"]').val());
        $('#booking02 input.booking.date').eq(1).val($('input[name="availabilitySearches[1].flightDate"]').val());

        if($('input[name="availabilitySearches[1].flightDate"]').val()!=''){
            $('#booking02 input.booking.date').eq(0).val($('input[name="availabilitySearches[0].flightDate"]').val());
        }

    }

};


/**
 * 나이계산기
 */
var alert_msg_select_route = '\uB178\uC120\uACFC \uCD9C\uBC1C\uC77C\uC744 \uBA3C\uC800 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.'; // 노선과 출발일을 먼저 선택해주세요.
var howOldAreYou = function(){

    var depAirport = $('input[name="availabilitySearches[0].depAirport"]').val();
    var arrAirport = $('input[name="availabilitySearches[0].arrAirport"]').val();
    var flightDate = $('input[name="availabilitySearches[0].flightDate"]').val();

    if(depAirport!='' && arrAirport!='' && flightDate!=''){

        flightDate = flightDate.replace(/\-/g,"");

        ageCalculater(flightDate, depAirport, arrAirport);
    }
    else{
        alert(alert_msg_select_route);
    }
};



//--
//-- 시작 -  출/도착공항 선택, 여정선택 레이어 control
//--

/**
 * 출발 공항 선택 레이어 호출
 * itineraryNumber ; 여정구간번호, 왕복/편도는 parameter 넘어오지 않음.
 * layerType ; search 검색, region 전체지역
 */
var selectAirportObj;
var selectAirportLayerType;
var selectItineraryNumber;
var currency = 'KRW';
var alert_msg_select_departure = '\uCD9C\uBC1C\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.';//'출발지를 선택하세요.';
var alert_msg_choose_departure_airport = '\uCD9C\uBC1C\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.';//'출발지를 선택해주세요.';
var alert_msg_choose_arrival_airport = '\uB3C4\uCC29\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.';//'도착지 공항을 선택해주세요.';
var selectAirports = function(obj, itineraryNumber, layerType){


    selectAirportObj = obj;
    selectItineraryNumber = itineraryNumber;
    selectAirportLayerType = layerType;

    $('#schedule_calendar').remove();
    $('#top_passenger_type').hide();

    /**
     * 출발지, 도착지 검색 영역에 포커스가 있는 경우 레이어 닫히지 않게 처리
     */
    var focusEle = $(":focus");

    // 출발지 선택중
    if( (focusEle.tagName == 'INPUT' && $(focusEle).hasClass('booking') && $(focusEle).hasClass('start'))
    || $(selectAirportObj).hasClass('booking') && $(selectAirportObj).hasClass('start') ){
        $('#route_departure').remove();
        $('#route_arrival').remove();
        $('#route_arrival_search').remove();
        $('#schedule_calendar').remove();
        $('#top_passenger_type').hide();

        if($('#route_departure_search').length > 0){
            return false;
        }
    }


    // 도착지 선택중
    if( (focusEle.tagName == 'INPUT' && $(focusEle).hasClass('booking') && $(focusEle).hasClass('end'))
        || $(selectAirportObj).hasClass('booking') && $(selectAirportObj).hasClass('end') ){
        $('#route_arrival').remove();
        $('#route_departure').remove();
        $('#route_departure_search').remove();
        $('#schedule_calendar').remove();
        $('#top_passenger_type').hide();

        if($('#route_arrival_search').length > 0){
            return false;
        }
    }

    var deptAirportCode = $('input[name="availabilitySearches[0].depAirport"]').val();


   
    // 위치 확인
    var $this = $(obj),
        thisTop = $this.offset().top - $('div.input_booking_wrap').offset().top + 65 + 90,
        thisLeft = $this.offset().left - $('div.input_booking_wrap').offset().left;

    if(layerType == 'region'){
        if(deptAirportCode!='' && $(obj).hasClass('end')){
            routeArrival(deptAirportCode, $('input[name="tripType"]:checked').val(), itineraryNumber);
            $('#route_arrival').css({'position': 'absolute','top': thisTop, 'left': thisLeft});
            showLayer('route_arrival');
        }
        else if(deptAirportCode=='' && $(obj).hasClass('end')){
            $(obj).blur();
            alert(alert_msg_select_departure);
            if($('#tripType_RT:checked').length==1) {
                $('#booking01 input.booking.start').focus();
            } else if($('#tripType_OW:checked').length==1) {
                $('#booking02 input.booking.start').focus();
            } else if($('#tripType_MC:checked').length==1){
                $('#booking03 input.booking.start').focus();
            }
            return false;
        }
        else{
            routeDeparture($('input[name="tripType"]:checked').val(), undefined, itineraryNumber);
            $('#route_departure').css({'position': 'absolute','top': thisTop, 'left': thisLeft});
            showLayer('route_departure');
            $('#route_departure').attr('tabindex','0').focus();

        }

    }
    else if(layerType == 'search'){

        if(deptAirportCode!='' && $(obj).hasClass('end')){
            routeArrivalSearch(obj, deptAirportCode, $('input[name="tripType"]:checked').val(), itineraryNumber);
            $('#route_arrival_search').css({'position': 'absolute','top': thisTop, 'left': thisLeft});
            showLayer('route_arrival_search');
        }
        else if(deptAirportCode=='' && $(obj).hasClass('end')){
            $(obj).blur();
            alert(alert_msg_select_departure);
            if($('#tripType_RT:checked').length==1) {
                $('#booking01 input.booking.start').focus();
            } else if($('#tripType_OW:checked').length==1) {
                $('#booking02 input.booking.start').focus();
            } else if($('#tripType_MC:checked').length==1){
                $('#booking03 input.booking.start').focus();
            }
            return false;
        }
        else{
            routeDepartureSearch(obj, $('input[name="tripType"]:checked').val(), undefined, itineraryNumber);
            $('#route_departure_search').css({'position': 'absolute','top': thisTop, 'left': thisLeft});
            showLayer('route_departure_search');
        }


    }

};

/**
 * 출/도착 공항정보 선택시 data 및 value 저장
 */
var setAirportData = function (airportObj, el){
    $(airportObj).data('city',$(el).data('city'));
    $(airportObj).data('airport',$(el).data('airport'));
    $(airportObj).data('airport_code',$(el).data('airport_code'));
    $(airportObj).data('conti',$(el).data('conti'));
    airportObj.val($(el).data('airport_code'));
};

var alert_msg_choose_departure_airport = '\uCD9C\uBC1C\uC9C0\uB97C \uC120\uD0DD\uD558\uC138\uC694.';//'출발지를 선택해주세요.';
var alert_msg_choose_arrival_airport = '\uB3C4\uCC29\uC9C0\uB97C \uC120\uD0DD\uD574\uC8FC\uC138\uC694.';//'도착지 공항을 선택해주세요.';

var gnbScheduleCalendar = function(tripType, bookingType, currency, deptAirportCode, arriAirportCode){

    isGnbRequest = false;
    scheduleCalendar(tripType, bookingType, currency, deptAirportCode, arriAirportCode);
    // gnb job flag
    isGnbRequest = true;
};

/**
 * 일정선택 레이어의 확인버튼 이벤트 처리 callback function
 * @param schedule      array형태로 반환, 편도/다구간조회인 경우 size=1, 왕복인경우 size=2, YYYYMMDD
 * @param schedule_str  YYYY-MM-DD
 */
var callBackScheduleConfirm = function(schedule, schedule_str){


    //왕복
    if($('#tripType_RT:checked').length==1) {

        $('#booking01 div.date').addClass('focus');
        $('#booking01 div.date input').eq(0).val(schedule_str[0]);
        $('#booking01 div.date input').eq(1).val(schedule_str[1]);


        $('#booking02 div.date').addClass('focus');
        $('#booking02 div.date input').eq(0).val(schedule_str[0]);

        // RQ
        $('input[name="availabilitySearches[0].flightDate"]').val(schedule_str[0]);
        $('input[name="availabilitySearches[1].flightDate"]').val(schedule_str[1]);
    }
    // 편도
    else if($('#tripType_OW:checked').length==1) {

        $('#booking01 div.date').addClass('focus');
        $('#booking01 div.date input').eq(0).val(schedule_str[0]);

        $('#booking02 div.date').addClass('focus');
        $('#booking02 div.date input').eq(0).val(schedule_str[0]);

        // RQ
        $('input[name="availabilitySearches[0].flightDate"]').val(schedule_str[0]);

    }

    showLayer('wrap', 'schedule_calendar', true);
};

/**
 * 호출된 레이어에서 사용자 요청에 의해 프로세스 중단(창닫기)시 부모페이어를 재호출
 */
var callBackOpener = function(hideLayerName){
    // $('#'+hideLayerName).remove();

    $('#wrap').slideDown( "slow", function() {
        $('#'+hideLayerName).remove();
    });

    // $('#wrap').css('overflow','');
    $('body').removeClass('no_scroll');
};


//--
//-- 끝 -  출/도착공항 선택, 여정선택 레이어 control
//--

</script>


        <!-- // 여정검색 -->

        <!-- Button -->
        <div class="btn_wrap">
            <button class="btn_large red" onclick="chooseItinerary();">예매하기</button>
        </div>
        <!--// Button -->

    </div>
</div>
<!--// Contnent -->

    <!--// end content -->
</div>
	
	</body>
	</html>